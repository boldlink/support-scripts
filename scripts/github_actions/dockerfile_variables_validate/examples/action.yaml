name: Environment Variables Validate
description: Validate environment variables against Dockerfile and env_vars.tf

inputs:
  dockerfile_path:
    description: 'Path to the Dockerfile'
    required: true
  terraform_dir:
    description: 'Path to the Terraform directory'
    required: true
  except_file_name:
    description: 'Name of the variable exceptions file'
    required: true

runs:
  using: "composite"
  steps:
  - uses: actions/checkout@v3
    with:
      repository: 'boldlink/support-scripts'
      ref: 'feature/environment-vars-validate'
      path: 'support-scripts'

  - uses: actions/setup-python@v4
    with:
      python-version: '3.11'
      
  - name: Validate variables
    shell: "bash"
    run: python $GITHUB_WORKSPACE/scripts/github_actions/dockerfile_variables_validate/variables_validate.py --dockerfile_path ${{inputs.dockerfile_path}} --terraform_dir ${{inputs.terraform_dir}} --except_file_name ${{inputs.except_file_name}} 

